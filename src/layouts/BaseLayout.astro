---
import Header from "../components/Header.astro";
import { Footer } from "../components/Footer";
import "../styles/global.css";

const { pathname } = Astro.url;
---

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Araki Takashi's Note</title>
    <link
        rel="preload"
        href="/fonts/Berkeley Mono Variable.woff2"
        as="font"
        type="font/woff2"
        crossorigin
    />
    <script is:inline>
      {`(function () {
        const storageKey = 'theme-preference';
        const root = document.documentElement;
        const applyTheme = (value) => {
          root.dataset.theme = value;
          root.style.colorScheme = value;
        };
        try {
          const stored = localStorage.getItem(storageKey);
          if (stored === 'light' || stored === 'dark') {
            applyTheme(stored);
            return;
          }
        } catch (error) {
          // localStorage might be unavailable; ignore and fall back to system preference
        }
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        applyTheme(prefersDark ? 'dark' : 'light');
      })();`}
    </script>
</head>
<body>
    <Header currentPath={pathname} />
    <slot />
    <Footer />
</body>
</html>
